- hosts: all
  remote_user: root
  tasks:

  - name: Prepare OpenShift home
    file: path=/usr/openshift state=directory

  - name: Prepare OpenShift runtime directory
    file: path=/var/openshift state=directory

  - name: Download OpenShift Origin
    unarchive:
      src: https://github.com/openshift/origin/releases/download/v1.5.1/openshift-origin-server-v1.5.1-7b451fc-linux-64bit.tar.gz
      dest: /usr/openshift
      remote_src: True

  - name: Install service systemd descriptor
    copy:
      src: openshift.service
      dest: /etc/systemd/system/openshift.service
      mode: 0664

  - name: Make sure OpenShift is running
    systemd:
      name: openshift
      state: started
      enabled: yes
      daemon_reload: yes